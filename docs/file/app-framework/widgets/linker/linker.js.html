<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../../../">
  <title data-ice="title">app-framework/widgets/linker/linker.js</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
<link rel="stylesheet" href="./inject/css/0-custom.css"></head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#base">base</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app-framework/base/application.js~Application.html">Application</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app-framework/base/component.js~Component.html">Component</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app-framework/base/evented.js~Evented.html">Evented</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app-framework/base/list.js~List.html">List</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app-framework/base/nls.js~Nls.html">Nls</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app-framework/base/template.js~Template.html">Template</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app-framework/base/widget.js~Widget.html">Widget</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#components">components</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app-framework/components/automator.js~Automator.html">Automator</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app-framework/components/chunk-reader.js~Reader.html">Reader</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app-framework/components/config.js~Config.html">Config</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app-framework/components/parser.js~Parser.html">Parser</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app-framework/components/parserCDpp.js~ParserCDpp.html">ParserCDpp</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app-framework/components/recorder.js~Recorder.html">Recorder</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app-framework/components/styler.js~Styler.html">Styler</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#components-ol">components/ol</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app-framework/components/ol/legend.js~Legend.html">Legend</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app-framework/components/ol/map.js~Map.html">Map</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#components-style">components/style</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app-framework/components/style/bucketFill.js~BucketFill.html">BucketFill</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app-framework/components/style/bucketRadius.js~BucketRadius.html">BucketRadius</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app-framework/components/style/bucketScale.js~BucketScale.html">BucketScale</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app-framework/components/style/bucketStroke.js~BucketStroke.html">BucketStroke</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app-framework/components/style/linestring.js~Linestring.html">Linestring</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app-framework/components/style/point.js~Point.html">Point</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app-framework/components/style/pointIcon.js~PointIcon.html">PointIcon</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app-framework/components/style/polygon.js~Polygon.html">Polygon</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app-framework/components/style/staticFill.js~StaticFill.html">StaticFill</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app-framework/components/style/staticRadius.js~StaticRadius.html">StaticRadius</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app-framework/components/style/staticScale.js~StaticScale.html">StaticScale</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app-framework/components/style/staticStroke.js~StaticStroke.html">StaticStroke</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#data-structures-configuration">data_structures/configuration</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app-framework/data_structures/configuration/configuration.js~Configuration.html">Configuration</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app-framework/data_structures/configuration/diagram.js~Diagram.html">Diagram</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app-framework/data_structures/configuration/gis.js~GIS.html">GIS</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app-framework/data_structures/configuration/grid.js~Grid.html">Grid</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app-framework/data_structures/configuration/playback.js~Playback.html">Playback</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app-framework/data_structures/configuration/section.js~Section.html">Section</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#data-structures-metadata">data_structures/metadata</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app-framework/data_structures/metadata/info.js~Info.html">Info</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app-framework/data_structures/metadata/link.js~Link.html">Link</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app-framework/data_structures/metadata/message_type.js~MessageType.html">MessageType</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app-framework/data_structures/metadata/metadata.js~Metadata.html">Metadata</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app-framework/data_structures/metadata/model.js~Model.html">Model</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app-framework/data_structures/metadata/model_ca.js~ModelCA.html">ModelCA</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app-framework/data_structures/metadata/structure.js~Structure.html">Structure</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app-framework/data_structures/metadata/type.js~Type.html">Type</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app-framework/data_structures/metadata/type_model.js~TypeModel.html">TypeModel</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app-framework/data_structures/metadata/type_model_ca.js~TypeModelCA.html">TypeModelCA</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app-framework/data_structures/metadata/type_port.js~TypePort.html">TypePort</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#data-structures-simulation">data_structures/simulation</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app-framework/data_structures/simulation/cache.js~Cache.html">Cache</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app-framework/data_structures/simulation/frame.js~Frame.html">Frame</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app-framework/data_structures/simulation/message.js~Message.html">Message</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app-framework/data_structures/simulation/message_output.js~MessageOutput.html">MessageOutput</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app-framework/data_structures/simulation/message_state.js~MessageState.html">MessageState</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app-framework/data_structures/simulation/message_state_ca.js~MessageStateCA.html">MessageStateCA</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app-framework/data_structures/simulation/simulation.js~Simulation.html">Simulation</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app-framework/data_structures/simulation/simulation_ca.js~SimulationCA.html">SimulationCA</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app-framework/data_structures/simulation/simulation_devs.js~SimulationDEVS.html">SimulationDEVS</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app-framework/data_structures/simulation/state.js~State.html">State</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app-framework/data_structures/simulation/stateCA.js~StateCA.html">StateCA</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app-framework/data_structures/simulation/stateDEVS.js~StateDEVS.html">StateDEVS</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#tools">tools</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app-framework/tools/core.js~Core.html">Core</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app-framework/tools/dom.js~Dom.html">Dom</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app-framework/tools/net.js~Net.html">Net</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app-framework/tools/style.js~Style.html">Style</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app-framework/tools/zip.js~Zip.html">Zip</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#ui">ui</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app-framework/ui/box-input-files.js~BoxInputFiles.html">BoxInputFiles</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app-framework/ui/list.js~List.html">List</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app-framework/ui/picker.js~Picker.html">Picker</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app-framework/ui/popup.js~Popup.html">Popup</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app-framework/ui/select.js~Select.html">Select</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app-framework/ui/tooltip.js~Tooltip.html">Tooltip</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app-framework/ui/yes-no.js~YesNo.html">YesNo</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">app-framework/widgets/linker/linker.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">&apos;use strict&apos;;

import Core from &apos;../../tools/core.js&apos;;
import Dom from &apos;../../tools/dom.js&apos;;

import Widget from &apos;../../base/widget.js&apos;;
import Reader from &apos;../../components/chunk-reader.js&apos;;

export default Core.templatable(&quot;Api.Widget.Linker&quot;, class Linker extends Widget { 
	
    get svg() { return this.elems.svg_content; }
	
	get svg_file() { 
		return new File([this.svg.innerHTML], &quot;diagram.svg&quot;, { type:&quot;image/svg+xml&quot;, endings:&apos;native&apos; }); 
	}
	
	get current() { return this._current; }
	
	constructor(container) {
		super(container);
	}
	
	async initialize(simulation, diagram) {
		this._current = {
			button: null,
			page: null,
			card: null
		}
		
		this.simulation = simulation;
		
		this.options = await this.make_options(simulation, diagram);
		
		this.load_svg(this.options.diagram);
		this.make_pages(this.options.pages);
		
		this.elems.chk_thick.addEventListener(&apos;click&apos;, this.on_linker_thicken.bind(this));
		this.elems.btn_clear.addEventListener(&apos;click&apos;, this.on_linker_clear.bind(this));
		
		this.options.pages.forEach(c =&gt;&#xA0;{
			c.button = Dom.create(&quot;button&quot;, { type: &quot;button&quot;, className: &quot;m-1 inactive&quot;, innerHTML: c.caption }, this.elems.buttons);
			
			c.button.addEventListener(&apos;click&apos;, (ev) =&gt; this.change_page(c));
		});
		
		this.change_page(this.options.pages[0]);
	}
	
	async make_options(simulation, diagram) {
		var diagram = await Reader.read_as_text(diagram);
		var ports = [];
		var links = [];
		
		simulation.models.forEach(m =&gt;&#xA0;{
			m.ports.forEach(p =&gt;&#xA0;ports.push({ model:m, port:p }));
		});
		
		simulation.models.forEach(m =&gt;&#xA0;links = links.concat(m.links));
		
		return {
			diagram: diagram,
			selector : Linker.SVG_FORMAT.DRAW_IO,
			pages: [{
				caption: &apos;Models&apos;,
				empty: &apos;No models found in the structure file.&apos;,
				label: d =&gt; `&lt;b&gt;${d.id}&lt;/b&gt;`,
				items: simulation.models,
				attrs: {
					&quot;devs-model-id&quot; : d =&gt;&#xA0;d.id
				}
			}, {
				caption: &apos;Output ports&apos;,
				empty: &apos;No output ports found in the structure file.&apos;,
				label: d =&gt; `&lt;div&gt;&lt;b&gt;${d.port.name}&lt;/b&gt; @ &lt;b&gt;${d.model.id}&lt;/b&gt;&lt;/div&gt;`,
				items: ports,
				attrs: {
					&quot;devs-port-model&quot; :  d =&gt;&#xA0;d.model.id,
					&quot;devs-port-name&quot; : d =&gt;&#xA0;d.port.name
				}
			}, {
				caption: &apos;Links&apos;,
				empty: &apos;No links found in the structure file.&apos;,
				label: d =&gt; `&lt;div&gt;&lt;b&gt;${d.port_a.name}&lt;/b&gt; @ &lt;b&gt;${d.model_a.id}&lt;/b&gt; to&lt;/div&gt;&lt;div&gt;&lt;b&gt;${d.port_b.name}&lt;/b&gt; @ &lt;b&gt;${d.model_b.id}&lt;/b&gt;&lt;/div&gt;`,
				items: links,
				attrs: {
					&quot;devs-link-mA&quot; : d =&gt;&#xA0;d.model_a.id,
					&quot;devs-link-pA&quot; : d =&gt;&#xA0;d.port_a.name
				}
			}]
		}
	}
	
    load_svg(diagram) {
		var selector = Linker.SVG_FORMAT.DRAW_IO;
		
		this.svg.innerHTML = diagram;
		
		this.reset_pointer_events();
		
		this.svg.querySelectorAll(selector).forEach((n, index) =&gt;&#xA0;{
			n.addEventListener(&apos;click&apos;, this.on_svg_click.bind(this), false);
			
			n.style.cursor = &quot;pointer&quot;;
			n.style.pointerEvents = &quot;all&quot;
		});
    }
	
	reset_pointer_events() {
		this.svg.querySelectorAll(&apos;*&apos;).forEach(n =&gt;&#xA0;{
			n.style.cursor = &quot;none&quot;;
			n.style.pointerEvents = &quot;none&quot;
		});
	}
	
	make_pages(pages) {
		pages.forEach(page =&gt;&#xA0;{
			page.items = page.items.map(item =&gt; this.make_item(page, item));
		});
	}
	
	make_item(page, item) {
		var item = { data:item, attrs:{}, node:null, svg:[] }
		
		for (var attr in page.attrs) item.attrs[attr] = page.attrs[attr](item.data);
		
		item.node = Dom.create(&quot;div&quot;, { innerHTML:page.label(item.data), className:&quot;card m-1 dwl-pointer dwl-card&quot; });
		
		Dom.create(&quot;i&quot;, { className:&quot;fas fa-exclamation-triangle warning-icon&quot; }, item.node);
		
		item.node.addEventListener(&apos;click&apos;, this.on_card_click.bind(this, item), false);
		
		item.svg = this.get_associations(item.attrs);
		
		return item;
	}
	
	get_associations(attrs) {
		var selector = &quot;&quot;;
		
		for (var attr in attrs) selector += `[${attr}=${attrs[attr]}]`
		
		return Array.from(this.svg.querySelectorAll(selector));
	}
	
	change_page(page) {
		Dom.empty(this.elems.cards);
		
		if (this.current.button) Dom.add_css(this.current.button, &apos;inactive&apos;);
		
		this.current.button = page.button;
		
		Dom.remove_css(this.current.button, &apos;inactive&apos;);
		
        this.clear_svg();
		
		this.current.page = page;
		
		if (page.items.length == 0) {
			return Dom.create(&quot;p&quot;, { innerHTML:page.empty }, this.elems.cards);
		}
		
		page.items.forEach(item =&gt;&#xA0;{
			Dom.place(item.node, this.elems.cards);
			
			Dom.toggle_css(item.node, &apos;hide-warning&apos;, item.svg.length &gt; 0);
		});
	}
	
	clear_svg() {
		if (!this.current.card) return;
		
		Dom.remove_css(this.current.card.node, &apos;dwl-highlight-card&apos;);
	}
	
	clear_cards() {
		if (!this.current.card) return;
		
		this.current.card.svg.forEach(n =&gt;&#xA0;n.classList.remove(&apos;dwl-selected&apos;));
	}
	
	refresh_warnings() {
		this.options.pages.forEach(p =&gt;&#xA0;{
			p.items.forEach(card =&gt;&#xA0;{
				Dom.toggle_css(card.node, &apos;hide-warning&apos;, card.svg.length &gt; 0);
			});
		});
	}
	
	reset_thickness() {
		this.elems.chk_thick.checked = false;
		
		this.svg.classList.toggle(&quot;dwl-thick&quot;, false);	
	}
	
	clear() {
		this.clear_svg();
		this.clear_cards();
		this.refresh_warnings();
	}
	
	reset() {
		this.clear();
		this.reset_pointer_events();
		this.reset_thickness();
	}
	
	on_svg_click(ev) {
		var card = this.current.card;
		
		if (!card) return;
		
		var i = card.svg.indexOf(ev.target);
		
		if (i != -1) {
			ev.target.classList.remove(&apos;dwl-selected&apos;);
			
			card.svg.splice(i, 1);
			
			for (var attr in card.attrs) ev.target.removeAttribute(attr);
		}
		
		else {
			ev.target.classList.add(&apos;dwl-selected&apos;);
			
			card.svg.push(ev.target);
			
			for (var attr in card.attrs) ev.target.setAttribute(attr, card.attrs[attr]);
		}
		
		Dom.toggle_css(card.node, &apos;hide-warning&apos;, card.svg.length &gt; 0);
	}
		
	on_card_click(card, ev) {
		this.clear();
		
		if (this.current.card == card) this.current.card = null;
		
		else {
			this.current.card = card;
			
			Dom.add_css(card.node, &apos;dwl-highlight-card&apos;);
			
			card.svg.forEach(a =&gt; a.classList.add(&apos;dwl-selected&apos;));
		}
	} 
	
	on_linker_thicken(ev) {
		this.svg.classList.toggle(&quot;dwl-thick&quot;, ev.target.checked);	
	}
	
	on_linker_clear(ev) {
		debugger;
		// TODO: There are a few bugs here. The attributes get cleared correctly but the element on the right hand side
		// stays highlighted. Afterwards, when animating the diagram, the couplings still get highlighted.
		this.options.pages.forEach(p =&gt;&#xA0;{
			p.items.forEach(card =&gt;&#xA0;{
				card.svg.forEach(svg =&gt;&#xA0;{
					for (var attr in card.attrs) svg.removeAttribute(attr);
				});
				
				card.svg = [];
			});
		});
		
		this.clear();
	}
	
	html() {
		return `&lt;div class=&quot;linker-widget d-flex flex-row h-100 w-100&quot;&gt;` + 
			      `&lt;div id=&quot;json-container&quot; class=&quot;d-flex flex-column card me-1 h-100 w-100&quot;&gt;` + 
					 `&lt;div handle=&quot;buttons&quot; class=&quot;p-3&quot;&gt;&lt;/div&gt;` + 
					 `&lt;div handle=&quot;cards&quot; id=&quot;cards&quot; class=&quot;h-100 d-flex flex-row flex-wrap align-content-start justify-content-center overflow-auto&quot;&gt;` + 
					    `&lt;div handle=&quot;svg_content&quot;&gt;&lt;/div&gt;`+					 
					 `&lt;/div&gt;` + 
					 `&lt;p class=&quot;m-2&quot;&gt;NOTE: Input ports will be automatically associated.&lt;/p&gt;` + 
				  `&lt;/div&gt;` + 
				  `&lt;div id=&quot;svg-container&quot; class=&quot;card ms-1 h-100 w-100 position-relative&quot;&gt;` + 
				     `&lt;div class=&quot;p-3 end-0&quot;&gt;` + 
						`&lt;div class=&quot;m-1 float-start&quot;&gt;` + 
						   `&lt;input handle=&quot;chk_thick&quot; id=&quot;dwl-thick-chk&quot; class=&quot;m-1 dwl-pointer align-middle&quot; type=&quot;checkbox&quot; title=&quot;Thicken line strokes for easier interaction.&quot;/&gt;` +
						   `&lt;label class=&quot;m-1 dwl-pointer align-middle&quot; title=&quot;Thicken line strokes for easier interaction.&quot; for=&quot;dwl-thick-chk&quot;&gt;Thicker line strokes&lt;/label&gt;` + 
						`&lt;/div&gt;` +
						`&lt;button handle=&quot;btn_clear&quot; type=&quot;button&quot; class=&quot;m-1 float-end&quot; data-button-type=&quot;clear&quot; title=&quot;Remove all associations.&quot;&gt;Clear&lt;/button&gt;` +
					 `&lt;/div&gt;` +
					 `&lt;div handle=&quot;svg_content&quot; id=&quot;svg-content&quot;&gt;&lt;/div&gt;` +
				  `&lt;/div&gt;` + 
			   `&lt;/div&gt;`;
	}
	
	localize(nls) {
		super.localize(nls);
	}

	static get SVG_FORMAT() {
		return {
			DRAW_IO: &apos;foreignObject div &gt; div &gt; div, rect:not([fill=&quot;none&quot;][stroke=&quot;none&quot;]), circle, ellipse, path, polygon, text&apos;
		}
	}
});</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(1.1.0)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
